<!DOCTYPE html>
<html >

    <head>
        <title>My Test</title>
        <style>
            span {
                color: green;
            }
        </style>
    </head>
    
    <body id="body" style="font: 14px/1.4 Arial;">
        <p id="p1" class="red">Abc</p>
    </body>
    
    <script>
        let el1 = document.querySelector('p');
        let shadow = el1.attachShadow({mode: 'open'});
            
        shadow.innerHTML='<span>Text</span> inserted by shadow';
            
        shadow.innerHTML += '<style>:host { color: red; }</style>';         //matches any element
        //shadow.innerHTML += '<style>:host(.red) { color: red; }</style>'; //matches elements of class red
        shadow.innerHTML += '<style> span { color: green; } </style>'; 
 
        
        //Old Shadow DOM V0 - only as an example!
        //var button = document.querySelector('#b1');
        //var root = button.createShadowRoot();
        //root.innerHTML = '<style>:host { text-transform: uppercase; }</style>' +
        //   '<content></content>';
        
        //var button = document.querySelector('#b2');
        //var root = button.createShadowRoot();
        //root.innerHTML =  '<style>:host {opacity: 0.4; transition: opacity 420ms ease-in-out; } :host(:hover) { opacity: 1; }  :host(:active) {  position: relative; top: 3px; left: 3px; } </style>'
        //    + '<content></content>';
        
        
    </script>
    
</html>